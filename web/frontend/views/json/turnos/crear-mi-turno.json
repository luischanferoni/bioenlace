{
  "steps": [
    {
      "step": 0,
      "title": "Seleccionar Servicio y Efector",
      "fields": ["id_servicio_asignado", "id_efector"]
    },
    {
      "step": 1,
      "title": "Seleccionar Profesional",
      "fields": ["id_rr_hh"]
    },
    {
      "step": 2,
      "title": "Seleccionar turno disponible",
      "fields": ["fecha", "hora"]
    },
    {
      "step": 3,
      "title": "Tipo de atención",
      "fields": ["tipo_atencion"]
    }
  ],
  "fields": [
    {
      "name": "id_servicio_asignado",
      "label": "Servicio",
      "type": "select",
      "required": true,
      "options": "{{options}}",
      "option_config": {
        "source": "servicios",
        "filter": "efector_servicios"
      }
    },
    {
      "name": "id_efector",
      "label": "Efector",
      "type": "autocomplete",
      "required": true,
      "endpoint": "/efectores/search",
      "depends_on": "id_servicio_asignado",
      "params": { "id_servicio": "id_servicio_asignado" },
      "auto_load": true,
      "option_config": {
        "source": "efectores",
        "filter": "user_efectores"
      }
    },
    {
      "name": "id_rr_hh",
      "label": "Profesional",
      "type": "autocomplete",
      "required": true,
      "endpoint": "/rrhh/rrhh-autocomplete",
      "depends_on": ["id_efector", "id_servicio_asignado"],
      "params": {
        "id_servicio": "id_servicio_asignado",
        "id_efector": "id_efector"
      },
      "auto_load": true,
      "option_config": {
        "source": "rrhh",
        "filter": "efector_rrhh"
      }
    },
    {
      "name": "fecha",
      "label": "Fecha",
      "type": "date",
      "required": true,
      "format": "YYYY-MM-DD",
      "min": "today",
      "depends_on": "id_rr_hh"
    },
    {
      "name": "hora",
      "label": "Hora",
      "type": "autocomplete",
      "required": true,
      "endpoint": "/turnos/eventos",
      "depends_on": ["id_rr_hh", "fecha"],
      "params": {
        "id_rr_hh": "id_rr_hh",
        "id_servicio": "id_servicio_asignado",
        "dia": "fecha",
        "formato": "formato_slots"
      },
      "auto_load": true,
      "option_config": {
        "source": "turnos_disponibles",
        "filter": null
      }
    },
    {
      "name": "formato_slots",
      "type": "text",
      "value": "slots"
    },
    {
      "name": "tipo_atencion",
      "label": "Tipo de atención",
      "type": "select",
      "required": true,
      "default": "presencial",
      "options": [
        { "value": "presencial", "label": "Presencial" },
        { "value": "teleconsulta", "label": "Por chat / teleconsulta" }
      ]
    }
  ]
}
